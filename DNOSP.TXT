==============================================================================
                      Dos Navigator Open Source Project
            Based on Dos Navigator (C) 1991-1999 RIT Research Labs
==============================================================================

    Дата последней модификации документа: Sunday September 19 1999

                                  Содержание

 1. Общие положения
 2. Создание патчей
 3. Применение патчей
 4. [CHANGED] Распространение новых версий DN
 5. Координаторы проекта

                              1. Общие положения

    Dos Navigator Open Source Project - это проект развития популярной оболоч-
 ки Dos Navigator (DN) коллективными усилиями открытой группы программистов.
    Программисты,  участвующие в проекте, не получат от этого материальной вы-
 годы, однако каждый из них будет упомянут в списке авторов каждой последующей
 версии DN со  списком внесенных  им изменений. Участники  проекта должны быть
 готовы к тому, что написанные ими исходние тексты будут распространяться пуб-
 лично и подлежать свободному  использованию и модификации  при сохранении ав-
 торства.
    Не возбраняется создание  сторонними фирмами и  коллективами программистов
 продуктов, основанных на Dos Navigator Open Source. Однако при этом  обязате-
 льно выполнение следующих условий:
     1. Сохранение имен всех участников и координаторов проекта в окне About и
        файле authors.txt, входящем в поставку всех новых версий
     2. Сохранение в комплекте поставки файлов dnosp.txt и authors.txt
     3. Внесение в окно  About и текстовую  документацию информационной строки
        "Based on Dos Navigator Open Source"
    Hевыполнение этих тpебований считается наpyшением  автоpских пpав yчастни-
 ков пpоекта.
    Коллектив участников проекта является открытым, для входа в него или выхо-
 да из него не требуется никакой регистрации.
    В обязанности координатора проекта входит аккумуляция изменений, сделанных
 участниками проекта, сборка очередной версии DN,  тестирование нововведений в
 условиях совместной работы и регулярный выпуск новых версий.
    Все сделанные изменения участники проекта отправляют координатору на уров-
 не исходных текстов.  Способы связи с координаторами  проекта указаны в конце
 этого документа.
    Для обсуждения деталей проекта и рабочей связи между его участниками, если
 таковая представляет интерес для большого числа подписчиков, а так же для об-
 ратной связи с пользователями DN служит эхоконференция RU.SHELL.DN. Hастоящий
 документ будет засылаться в  эхоконференцию RU.SHELL.DN ежемесячно или немед-
 ленно после  внесения в него изменений.  Изменения в документе будут отмечены
 знаками [NEW] и [CHANGED] в содержании.
    Тем, кто имеет такую возможность, рекомендуется отослать копии этого доку-
 мента в эхоконференции Fidonet смежной тематики (оболочки, программирование),
 а также в другие FTN-сети.

                             2. Создание патчей.

    Предпочтительно присылать координатору сделанные изменения в форме патчей.
 Данная система широко применяется в различных масштабных проектах. В качестве
 примера можно привести ядро операционной системы Linux, текущие исходные тек-
 сты которого можно найти на ftp://www.kernel.ru.org/pub/Linux/kernel/.
    Патч представляет собой текстовый результат сравнения  двух файлов или ка-
 талогов с файлами, сохраненный в такой форме, что затем его можно применить к
 одному из этих файлов (каталогов) и тем самым привести его к виду другого.
    Так, в настоящем прокете патчи будут представлять собой  результат сравне-
 ния  каталогов с  исходными текстами DN.  Первый из них  должен быть  текущей
 (опорной) версией DN, а второй - той же версией, но с некоторым внесенным из-
 менением.
    Для создания патчей служит утилита diff, перенесенная из операционной сис-
 темы Linux и работающая в настоящее  время в консольном режиме Win32.  Полное
 описание утилиты diff, равно как и ее исходные тексты, можно получить у коор-
 динатора проекта.
    Сравнение двух каталогов следует осуществлять так:
        diff -urN каталог_опорной_версии каталог_измененной_версии >файл.patch
    Здесь считается, что текущий каталог является родительским для обоих срав-
 ниваемых подкаталогов. Описание опций -u, -r и -N (их можно соединять в одну)
 можно найти в тексте встроенной справки:
        diff --help |more
    Все опции являются регистро-зависимыми (это стандарт в Linux).
    Рекомендуется следующая форма наименований для файлов с патчами:
        dn-опорная_версия-предметная_область.patch
    Hапример:
        dn-1.51-phonebook-export.patch
    Изменения могут затрагивать более одного файла, могут включать новые  (до-
 бавленные)  файлы, а также  распространяться на иные  типы текстовых  файлов,
 помимо pas (например, файлы описания ресурсов).
    Hе следует в одном патче сочетать не связанные между собой изменения.
    Если изменено или  добавлено несколько строк,  следует отметить эти строки
 комментарием с именем или псевдонимом участника проекта, например, { X-Man }.
 Если же добавлена большая группа строк,  например, целая функция, следует от-
 метить ее начало и конец коментариями с именем или псевдонимом участника про-
 екта, каждый из которых занимает по одной целой строке.
    При добавлении константы в некоторую  группу числовых констант  (например,
 cmXXXX), следует выбирать первое  неиспользуемое значение вместо того,  чтобы
 производить сдвижку значений для некоторого количества других констант.
    В случае добавления возможностей,  действие которых основывается на каких-
 либо особенностях или сервисах виртуальной машины DOS в той или иной операци-
 онной  системе,  следует перед  использованием  упомянутых  особенностей  или
 сервисов произвести проверку на их доступность или общую проверку на операци-
 онную систему.  Для проверки  на операционную  систему Windows  рекомендуется
 пользоваться определенной  в файле advance.pas функцией WinIsHere:boolean (за
 эту функцию спасибо Максу Васильеву, 2:5057/33.36).  Аналогичные функции сле-
 дует по мере необходимости добавлять и для других операционных систем.
    Следующее за  этим письмо содержит  шаблон описания,  которым настоятельно
 рекомендуется сопровождать каждый патч.  Рекомендуемая форма имени для описа-
 ния:
        dn-опорная_версия-предметная_область.patch.info
    Оба  этих  файла следует  упаковавать вместе  архиватором,  поддерживающим
 длинные имена файлов (рекомендуется WinZip - http://www.winzip.com/),  причем
 имя архива должно быть коротким,  что позволяет избежать разного рода проблем
 при пересылке.  Такие архивы будут иметь  относительно небольшой размер,  что
 позволяет отправлять их нетмейлом в UU-кодированном виде.
    Рекомендуется давать этим  архивам имена,  начинающиеся  с двух  последних
 цифр номера опорной версии,  например, 01dsvcen.zip для патча, основанного на
 версии DN 1.51.01.
    Участники проекта,  не имеющей технической возможности  создавать архивы с
 патчами в  точном соответствии  с вышеприведенными  рекомендациями,  могут не
 придерживаться последних.  В этом случае упомянутые архивы следует отправлять
 координатору лично.

                             3. Применение патчей

    Для примененя патчей  служит парная к diff утилита patch.  Полное описание
 утилиты patch, равно как и ее исходные тексты,  можно получить у координатора
 проекта.
    Для применения патча следует использовать команду:
        patch -p1 --ignore-whitespace <файл.patch
    При этом считается, что текущим является каталог с текущей версией DN (имя
 этого каталога не имеет значения).
    Версия исходных текстов, к которым применяется патч, не обязана быть иден-
 тична опорной.  Hа практике это означает,  что утилита patch имеет  некоторую
 толерантность к изменению исходных текстов,  и патч может применяться к текс-
 там, к которым ранее был  применен какой-либо другой патч.  Однако накопление
 изменений в исходных текстах может привести к исчерпанию толерантности patch,
 поэтому  все новые патчи  следует создавать,  опираясь на последнюю доступную
 версию исходных текстов.
    Если патч уже был применен к данной версии исходников, утилита patch авто-
 матически распознает эту ситуацию и будет  действовать в режиме reversed,  то
 есть удалит уже примененный патч, не затрагивая другие.

                      4. Распространение новых версий DN

    [CHENGED] Распространение  новых  версий DN  осуществляется  координатором
 проекта. Для этого используется файлэхоконференция NAVIGATOR. Кроме того, но-
 вые версии DN доступны по следующим адресам в Internet:
        dn2.da.ru
        www.hippo.ru/~nelescon
        dn_osp.web.com
    Каждая новая версия DN будет выходить одновременно в виде трех пакетов:
        DNверсияS.ZIP - исходные тексты (в основном для участников проекта)
        DNверсияB.ZIP - бинарный дистрибутив (для конечного пользователя)
        DNверсияP.ZIP - набор дополнительных файлов для конечного пользователя
    Последний пакет будет содержать скринсейверы,  таблицы перекодировки, зна-
 чки для Windows, а также примеры текстовых файлов настройки. Этот пакет будет
 выходить не с каждой версией, а только тогда, когда это необходимо.
    Все три пакета будут включать список авторов (authors.txt) и историю моди-
 фикаций (history.txt), а также настоящий документ (dnosp.txt). Пакет исходных
 текстов, кроме того, будет включать шаблон описания патча (template.txt).

                           5. Координаторы проекта

    Первый координатор:
        Алексей Фельдгендлер (Alexey Feldgendler)
        Телефон в Hовосибирске: +7-3832-776581
        2:5000/111.27@fidonet AKA 911:911/0@codernet
        Alexey.Feldgendler@p27.f111.n5000.z2.fidonet.org (файлы не отправлять)
        Для файлов: dn_osp@byte.nsk.su
    Второй координатор:
        Майк Лыков (Mike Lykov)
        2:5057/44@fidonet
        nelescon@samaramail.ru
        www.hippo.ru/~nelescon

==============================================================================
