;
; ЙННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН»
; є This file is generated by The Interactive Disassembler (IDA)    є
; є Copyright (c) 1998 by DataRescue sa/nv, <ida@datarescue.com>    є
; ИНННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННј
; Џp®¤ б¬Ґ­® Ё Їp®Ї взҐ­® Ђ­в®­®¬ ”Ґ¤®p®ўл¬ aka DataCompBoy
; ‚ зҐбвм Њ в pлЄЁ­®© “«мп­л


; File Name   : lzw4plib.obj
; Format      : Object Module Format (OMF/Microsoft)
; Module name      : lzw4plib.asm


p286n

; ННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН

; Segment type: Pure data
_DATA           segment word public 'DATA'
                assume cs:_DATA
byte_0_0        db 9Dh, 13h, 45h, 23h, 79h ; DATA XREF: TypeNag+1o
                                        ; SelfCheck+4r ...
                db 46h
word_0_6        dw 0                    ; DATA XREF: INITLZW+42w INITLZW+5Er
word_0_8        dw 0                    ; DATA XREF: sub_12C_EA+4r INITLZW+49w
word_0_A        dw 0                    ; DATA XREF: INITLZW+67w COMPRESS+DBr
word_0_C        dw 0                    ; DATA XREF: sub_12C_5A+2Br
                                        ; sub_12C_EA+1Br ...
word_0_E        dw 0                    ; DATA XREF: sub_12C_5A+31w
                                        ; COMPRESS+A5r ...
word_0_10       dw 0                    ; DATA XREF: sub_12C_5A+3Dw
                                        ; COMPRESS+F2r ...
dword_0_12      dd 0                    ; DATA XREF: sub_12C_5A+3r
                                        ; sub_12C_EA+27r ...
dword_0_16      dd 0                    ; DATA XREF: sub_12C_9E+20r
                                        ; sub_12C_EA+3Ar ...
dword_0_1A      dd 0                    ; DATA XREF: sub_12C_9E+8r
                                        ; sub_12C_EA+49r ...
word_0_1E       dw 0                    ; DATA XREF: sub_12C_5A+37w
                                        ; sub_12C_157+Cr ...
word_0_20       dw 0                    ; DATA XREF: INITLZW+39w INITLZW+C2w ...
dword_0_22      dd 0                    ; DATA XREF: sub_12C_157+18r
                                        ; COMPRESS+35w ...
dword_0_26      dd 0                    ; DATA XREF: sub_12C_197+31r
                                        ; COMPRESS+42w ...
;DCB;WeModified      dw 0                    ; DATA XREF: INITLZW+19w COMPRESS+Br ...
byte_0_2C       db 0                    ; DATA XREF: sub_12C_157+6r
                                        ; sub_12C_157+39w ...
byte_0_2D       db 0                    ; DATA XREF: sub_12C_157+2r
                                        ; sub_12C_157+35w
byte_0_2E       db 0                    ; DATA XREF: sub_12C_197+6r
                                        ; sub_12C_197+3Fw ...
byte_0_2F       db 0                    ; DATA XREF: sub_12C_197+2r
                                        ; sub_12C_197+3Bw
word_0_30       dw 0                    ; DATA XREF: sub_12C_9Er EXPAND+B8w ...
dword_0_32      dd 0                    ; DATA XREF: sub_12C_9E+11r
                                        ; sub_12C_9E+18w ...
                db 2 dup(0)
word_0_38       dw 0                    ; DATA XREF: sub_12C_5A+Ew
                                        ; sub_12C_5A+24r ...
dword_0_3A      dd 0                    ; DATA XREF: sub_12C_5A+7w
                                        ; sub_12C_5A+16r ...
word_0_3E       dw 0                    ; DATA XREF: EXPAND+4Fw EXPAND+52r ...
word_0_40       dw 0                    ; DATA XREF: EXPAND+71w EXPAND+74r ...
dword_0_42      dd 0                    ; DATA XREF: EXPAND+BEw EXPAND+DAw ...
word_0_46       dw 0                    ; DATA XREF: EXPAND+63w EXPAND+A5r ...
word_0_48       dw 0                    ; DATA XREF: COMPRESS+50w COMPRESS+53r ...
word_0_4A       dw 0                    ; DATA XREF: COMPRESS+69r COMPRESS+C8r ...
word_0_4C       dw 0                    ; DATA XREF: COMPRESS+72w COMPRESS+75r ...
word_0_4E       dw 0                    ; DATA XREF: sub_12C_EAr
                                        ; sub_12C_EA+54r ...
                db 2 dup(0)
word_0_52       dw 0                    ; DATA XREF: sub_12C_EA+13w
                                        ; sub_12C_EA+20w ...
word_0_54       dw 0                    ; DATA XREF: sub_12C_EA+Ar
                                        ; sub_12C_EA+43r ...
byte_0_56       db 012BDh dup(0)        ;DCB;
;DCB;byte_0_56       db 0                    ; DATA XREF: EXPAND+A8w
;DCB;                db 0FA0h dup(0), 0CDh, 0E1h, 0F2h
;DCB;                db 0F3h, 0E8h, 0E1h, 2 dup(0ECh)
;DCB;                db 0D3h, 0EFh, 0E6h, 0F4h, 0
;DCB;byte_0_1004     db 64h                  ; DATA XREF: INITLZW+13r
;DCB;aLzwDataCompres db 0Dh,0Ah
;DCB;                db 'ЙННННННННННННННННННННННННННННННННН»',0Dh,0Ah
;DCB;                db 'є LZW  Data  Compression  Library є',0Dh,0Ah
;DCB;                db 'МННННННННННННННННННННННННННННННННН№',0Dh,0Ah
;DCB;                db 'є LZW   Version 1.4   June 1994   є',0Dh,0Ah
;DCB;                db 'є Copyright (C) 1992-1994 by:     є',0Dh,0Ah
;DCB;                db 'є   MarshallSoft Computing, Inc.  є',0Dh,0Ah
;DCB;                db 'є   Post  Office  Box  4543       є',0Dh,0Ah
;DCB;                db 'є   Huntsville  AL  35815         є',0Dh,0Ah
;DCB;                db 'є   Voice / FAX   205-881-4630    є',0Dh,0Ah
;DCB;                db 'є   Support BBS   205-880-9748    є',0Dh,0Ah
;DCB;                db 'ЗДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД¶',0Dh,0Ah
;DCB;                db 'є To register, send $45 + $3 S&H  є',0Dh,0Ah
;DCB;                db 'є to the above address & receive: є',0Dh,0Ah
;DCB;                db 'є   o  No shareware screens.      є',0Dh,0Ah
;DCB;                db 'є   o  Source code to library.    є',0Dh,0Ah
;DCB;                db 'є   o  Laser printed manual.      є',0Dh,0Ah
;DCB;                db 'є   o  1 year telephone support.  є',0Dh,0Ah
;DCB;                db 'ИНННННННННННННННННННННННННННННННННј',0Dh,0Ah,0
;DCB;aTypeAnyKeyToCo db 'Type any key to continue...',0
_DATA           ends

; ННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННННН

; Segment type: Pure code
CODE            segment byte public 'CODE'
                assume cs:CODE
                assume es:nothing, ss:nothing, ds:nothing

;DCB;; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ
;DCB;
;DCB;;               S u b r o u t i n e
;DCB;
;DCB;DelayOneTic     proc near               ; CODE XREF: INITLZW+29p
;DCB;                push    ax
;DCB;                push    es
;DCB;                mov     ax, 0
;DCB;                mov     es, ax
;DCB;                assume es:nothing
;DCB;                mov     ax, es:46Ch
;DCB;
;DCB;loc_12C_B:                              ; CODE XREF: DelayOneTic+10j
;DCB;                cmp     ax, es:46Ch
;DCB;                jz      loc_12C_B
;DCB;                pop     es
;DCB;                assume es:nothing
;DCB;                pop     ax
;DCB;                retn
;DCB;DelayOneTic     endp


;DCB;; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ
;DCB;
;DCB;;               S u b r o u t i n e
;DCB;
;DCB;TypeCharacter   proc near               ; CODE XREF: TypeString+Cp
;DCB;                push    ax
;DCB;                push    bx
;DCB;                mov     ah, 0Eh
;DCB;                mov     bx, 7
;DCB;                int     10h             ; - VIDEO - WRITE CHARACTER AND ADVANCE CURSOR (TTY WRITE)
;DCB;                                        ; AL = character, BH = display page (alpha modes)
;DCB;                                        ; BL = foreground color (graphics modes)
;DCB;                pop     bx
;DCB;                pop     ax
;DCB;                retn
;DCB;TypeCharacter   endp


;DCB;; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ
;DCB;
;DCB;;               S u b r o u t i n e
;DCB;
;DCB;TypeString      proc near               ; CODE XREF: TypeNag+4p INITLZW+32p
;DCB;                push    di
;DCB;                mov     ah, 0
;DCB;
;DCB;loc_12C_24:                             ; CODE XREF: TypeString+Fj
;DCB;                mov     al, [di]
;DCB;                add     ah, al
;DCB;                inc     di
;DCB;                cmp     al, 0
;DCB;                jz      loc_12C_32
;DCB;                call    TypeCharacter
;DCB;                jmp     short loc_12C_24
;DCB;; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
;DCB;
;DCB;loc_12C_32:                             ; CODE XREF: TypeString+Aj
;DCB;                pop     di
;DCB;                retn
;DCB;TypeString      endp


;DCB;; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ
;DCB;
;DCB;;               S u b r o u t i n e
;DCB;
;DCB;TypeNag         proc near               ; CODE XREF: INITLZW+10p
;DCB;                push    di
;DCB;                mov     di, offset byte_0_0+1005h
;DCB;                call    TypeString
;DCB;                pop     di
;DCB;                retn
;DCB;TypeNag         endp


;DCB;; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ
;DCB;
;DCB;;               S u b r o u t i n e
;DCB;
;DCB;SelfCheck       proc near               ; CODE XREF: INITLZW+Bp
;DCB;                push    bx
;DCB;                mov     bx, 0
;DCB;
;DCB;loc_12C_41:                             ; CODE XREF: SelfCheck+15j
;DCB;                mov     al, ds:(byte_0_0+0FF7h)[bx]
;DCB;                cmp     al, 0
;DCB;                jz      loc_12C_57
;DCB;                and     al, 7Fh
;DCB;                cmp     al, ds:(byte_0_0+10C4h)[bx]
;DCB;                jnz     loc_12C_54
;DCB;                inc     bx
;DCB;                jmp     short loc_12C_41
;DCB;; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
;DCB;
;DCB;loc_12C_54:                             ; CODE XREF: SelfCheck+12j
;DCB;                stc
;DCB;                jmp     short loc_12C_58
;DCB;; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
;DCB;
;DCB;loc_12C_57:                             ; CODE XREF: SelfCheck+Aj
;DCB;                clc
;DCB;
;DCB;loc_12C_58:                             ; CODE XREF: SelfCheck+18j
;DCB;                pop     bx
;DCB;                retn
;DCB;SelfCheck       endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e

sub_12C_5A      proc near               ; CODE XREF: COMPRESS+49p COMPRESS+EAp ...
                mov     ax, word ptr ds:dword_0_12+2
                mov     dx, word ptr ds:dword_0_12
                mov     word ptr ds:dword_0_3A, dx
                mov     word ptr ds:dword_0_3A+2, ax
                mov     ds:word_0_38, 0
                jmp     short loc_12C_7E
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_70:                             ; CODE XREF: sub_12C_5A+2Fj
                les     bx, ds:dword_0_3A
                mov     word ptr es:[bx], 0FFFFh
                add     word ptr ds:dword_0_3A, 2

loc_12C_7E:                             ; CODE XREF: sub_12C_5A+14j
                mov     ax, ds:word_0_38
                inc     ds:word_0_38
                cmp     ax, ds:word_0_C
                jb      loc_12C_70
                mov     ds:word_0_E, 103h
                mov     ds:word_0_1E, 9
                mov     ds:word_0_10, 1FFh
                retn
sub_12C_5A      endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e

sub_12C_9E      proc near               ; CODE XREF: EXPAND+BBp EXPAND+D7p
                mov     dx, ds:word_0_30
                xor     cx, cx
                jmp     short loc_12C_D5
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_A6:                             ; CODE XREF: sub_12C_9E+3Bj
                les     bx, ds:dword_0_1A
                add     bx, dx
                mov     al, es:[bx]
                les     bx, ds:dword_0_32
                mov     es:[bx], al
                inc     word ptr ds:dword_0_32
                mov     ax, dx
                shl     ax, 1
                les     bx, ds:dword_0_16
                add     bx, ax
                mov     ax, es:[bx]
                mov     dx, ax
                mov     ax, cx
                inc     cx
                cmp     ax, 0FA0h
                jl      loc_12C_D5
                mov     ax, 0FFFFh
                retn
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_D5:                             ; CODE XREF: sub_12C_9E+6j
                                        ; sub_12C_9E+31j
                cmp     dx, 0FFh
                ja      loc_12C_A6
                les     bx, ds:dword_0_32
                mov     es:[bx], dl
                mov     dx, word ptr ds:dword_0_32+2
                mov     ax, word ptr ds:dword_0_32
                retn
sub_12C_9E      endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e

sub_12C_EA      proc near               ; CODE XREF: COMPRESS+6Fp
                mov     dx, ds:word_0_4E
                mov     cx, ds:word_0_8
                shl     dx, cl
                xor     dx, ds:word_0_54
                cmp     dx, 0
                jnz     loc_12C_105
                mov     ds:word_0_52, 1
                jmp     short loc_12C_10D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_105:                            ; CODE XREF: sub_12C_EA+11j
                mov     ax, ds:word_0_C
                sub     ax, dx
                mov     ds:word_0_52, ax

loc_12C_10D:                            ; CODE XREF: sub_12C_EA+19j
                                        ; sub_12C_EA+6Bj
                mov     ax, dx
                shl     ax, 1
                les     bx, ds:dword_0_12
                add     bx, ax
                cmp     word ptr es:[bx], 0FFFFh
                jnz     loc_12C_120
                mov     ax, dx
                retn
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_120:                            ; CODE XREF: sub_12C_EA+31j
                mov     ax, dx
                shl     ax, 1
                les     bx, ds:dword_0_16
                add     bx, ax
                mov     ax, es:[bx]
                cmp     ax, ds:word_0_54
                jnz     loc_12C_147
                les     bx, ds:dword_0_1A
                add     bx, dx
                mov     al, es:[bx]
                mov     ah, 0
                cmp     ax, ds:word_0_4E
                jnz     loc_12C_147
                mov     ax, dx
                retn
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_147:                            ; CODE XREF: sub_12C_EA+47j
                                        ; sub_12C_EA+58j
                mov     ax, ds:word_0_52
                sub     dx, ax
                cmp     dx, 0
                jge     loc_12C_155
                add     dx, ds:word_0_C

loc_12C_155:                            ; CODE XREF: sub_12C_EA+65j
                jmp     short loc_12C_10D
sub_12C_EA      endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e

sub_12C_157     proc near               ; CODE XREF: EXPAND+4Cp EXPAND+6Ep
                push    bx
                push    cx
                mov     bl, ds:byte_0_2D
                mov     bh, ds:byte_0_2C
                xor     dx, dx
                mov     cx, ds:word_0_1E

loc_12C_167:                            ; CODE XREF: sub_12C_157+31j
                cmp     bh, 0
                jnz     loc_12C_17A
                push    bx
                push    cx
                push    dx
                call    ds:dword_0_22
                pop     dx
                pop     cx
                pop     bx
                mov     bl, al
                mov     bh, 8

loc_12C_17A:                            ; CODE XREF: sub_12C_157+13j
                shl     dx, 1
                test    bl, 80h
                jz      loc_12C_184
                or      dx, 1

loc_12C_184:                            ; CODE XREF: sub_12C_157+28j
                shl     bl, 1
                dec     bh
                loop    loc_12C_167
                mov     ax, dx
                mov     ds:byte_0_2D, bl
                mov     ds:byte_0_2C, bh
                pop     cx
                pop     bx
                retn
sub_12C_157     endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e

sub_12C_197     proc near               ; CODE XREF: COMPRESS+D2p COMPRESS+E7p ...
                push    bx
                push    cx
                mov     bl, ds:byte_0_2F
                mov     bh, ds:byte_0_2E
                mov     cl, 10h
                sub     cl, byte ptr ds:word_0_1E
                shl     dx, cl
                mov     cx, ds:word_0_1E

loc_12C_1AD:                            ; CODE XREF: sub_12C_197+39j
                shl     bl, 1
                test    dx, 8000h
                jz      loc_12C_1B8
                or      bl, 1

loc_12C_1B8:                            ; CODE XREF: sub_12C_197+1Cj
                inc     bh
                shl     dx, 1
                cmp     bh, 8
                jnz     loc_12C_1D0
                mov     al, bl
                xor     ah, ah
                push    cx
                push    dx
                push    ax
                call    ds:dword_0_26
                pop     dx
                pop     cx
                xor     bx, bx

loc_12C_1D0:                            ; CODE XREF: sub_12C_197+28j
                loop    loc_12C_1AD
                mov     ds:byte_0_2F, bl
                mov     ds:byte_0_2E, bh
                pop     cx
                pop     bx
                retn
sub_12C_197     endp ; sp = -2


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e
; Attributes: bp-based frame

                public INITLZW
INITLZW         proc far

arg_0           = word ptr  6
arg_2           = dword ptr  8

                push    bp
                mov     bp, sp
                sub     sp, 2
                pushf
                push    ds
                push    es
                push    di
                push    si
;DCB;                call    SelfCheck
;DCB;                jb      ErrorWeModified
;DCB;                call    TypeNag
;DCB;                cmp     ah, ds:byte_0_1004
;DCB;                jz      DoDelay
;DCB;
;DCB;ErrorWeModified:                        ; CODE XREF: INITLZW+Ej
;DCB;                mov     ds:WeModified, 1
;DCB;                mov     ax, 0FFFDh
;DCB;                jmp     loc_12C_2B1
;DCB;; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
;DCB;
;DCB;DoDelay:                                ; CODE XREF: INITLZW+17j
;DCB;                push    cx
;DCB;                mov     cx, 3Ch ; '<'
;DCB;
;DCB;DelayLoop:                              ; CODE XREF: INITLZW+2Cj
;DCB;                call    DelayOneTic
;DCB;                loop    DelayLoop
;DCB;                pop     cx
;DCB;                mov     di, offset byte_0_0+12A2h
;DCB;                call    TypeString
;DCB;                mov     ah, 0
;DCB;                int     16h             ; KEYBOARD - READ CHAR FROM BUFFER, WAIT IF EMPTY
;DCB;                                        ; Return: AH = scan code, AL = character
;DCB;;There's end of delay
                mov     ds:word_0_20, 0
                mov     bx, [bp+arg_0]
                mov     ds:word_0_6, bx
                sub     bx, 8
                mov     ds:word_0_8, bx
                sub     bx, 4
                cmp     bx, 3
                jb      loc_12C_238
                mov     ax, 0FFFBh
                jmp     short loc_12C_2B1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
                nop

loc_12C_238:                            ; CODE XREF: INITLZW+53j
                mov     ax, 1
                mov     cx, ds:word_0_6
                shl     ax, cl
                sub     ax, 2
                mov     ds:word_0_A, ax
                add     bx, bx
                mov     ax, word ptr ds:byte_0_0[bx]
                mov     ds:word_0_C, ax
                add     ax, ds:word_0_C
                push    ax
                call    [bp+arg_2]
                mov     word ptr ds:dword_0_12, ax
                mov     word ptr ds:dword_0_12+2, dx
                mov     ax, ds:word_0_C
                add     ax, ds:word_0_C
                push    ax
                call    [bp+arg_2]
                mov     word ptr ds:dword_0_16, ax
                mov     word ptr ds:dword_0_16+2, dx
                mov     ax, ds:word_0_C
                push    ax
                call    [bp+arg_2]
                mov     word ptr ds:dword_0_1A, ax
                mov     word ptr ds:dword_0_1A+2, dx
                mov     ax, word ptr ds:dword_0_12
                or      ax, word ptr ds:dword_0_12+2
                jz      loc_12C_29A
                mov     ax, word ptr ds:dword_0_16
                or      ax, word ptr ds:dword_0_16+2
                jz      loc_12C_29A
                mov     ax, word ptr ds:dword_0_1A
                or      ax, word ptr ds:dword_0_1A+2
                jnz     loc_12C_29F

loc_12C_29A:                            ; CODE XREF: INITLZW+A9j INITLZW+B2j
                mov     ax, 0FFFEh
                jmp     short loc_12C_2B1
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_29F:                            ; CODE XREF: INITLZW+BBj
                mov     ds:word_0_20, 1
                mov     ds:byte_0_2C, 0
                mov     ds:byte_0_2E, 0
                xor     ax, ax

loc_12C_2B1:                            ; CODE XREF: INITLZW+22j INITLZW+58j ...
                pop     si
                pop     di
                pop     es
                pop     ds
                popf
                mov     sp, bp
                pop     bp
                retf    2
INITLZW         endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e
; Attributes: bp-based frame

                public TERMLZW
TERMLZW         proc far

arg_0           = dword ptr  6

                push    bp
                mov     bp, sp
                sub     sp, 2
                pushf
                push    ds
                push    es
                push    di
                push    si
                push    word ptr ds:dword_0_12+2
                push    word ptr ds:dword_0_12
                mov     ax, ds:word_0_C
                add     ax, ds:word_0_C
                push    ax
                call    [bp+arg_0]
                push    word ptr ds:dword_0_16+2
                push    word ptr ds:dword_0_16
                mov     ax, ds:word_0_C
                add     ax, ds:word_0_C
                push    ax
                call    [bp+arg_0]
                push    word ptr ds:dword_0_1A+2
                push    word ptr ds:dword_0_1A
                mov     ax, ds:word_0_C
                push    ax
                call    [bp+arg_0]
                mov     ds:word_0_20, 0
                xor     ax, ax
                pop     si
                pop     di
                pop     es
                pop     ds
                popf
                mov     sp, bp
                pop     bp
                retf    2
TERMLZW         endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e
; Attributes: bp-based frame

                public COMPRESS
COMPRESS        proc far

arg_0           = word ptr  6
arg_2           = word ptr  8
arg_4           = word ptr  0Ah
arg_6           = word ptr  0Ch

                push    bp
                mov     bp, sp
                sub     sp, 2
                pushf
                push    ds
                push    es
                push    di
                push    si
;DCB;                cmp     ds:WeModified, 0
;DCB;                jz      loc_12C_327
;DCB;                mov     ax, 0FFFDh
;DCB;                jmp     loc_12C_440
;DCB;; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
;DCB;
;DCB;loc_12C_327:                            ; CODE XREF: COMPRESS+10j
                mov     ds:byte_0_2C, 0
                mov     ds:byte_0_2E, 0
                cmp     ds:word_0_20, 0
                jnz     loc_12C_33E
                mov     ax, 0FFFCh
                jmp     loc_12C_440
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_33E:                            ; CODE XREF: COMPRESS+27j
                mov     dx, [bp+arg_4]
                mov     ax, [bp+arg_6]
                mov     word ptr ds:dword_0_22, dx
                mov     word ptr ds:dword_0_22+2, ax
                mov     dx, [bp+arg_0]
                mov     ax, [bp+arg_2]
                mov     word ptr ds:dword_0_26, dx
                mov     word ptr ds:dword_0_26+2, ax
                call    sub_12C_5A
                call    ds:dword_0_22
                mov     ds:word_0_48, ax
                cmp     ds:word_0_48, 0FFFFh
                jnz     loc_12C_36F
                mov     ds:word_0_48, 100h

loc_12C_36F:                            ; CODE XREF: COMPRESS+58j
                jmp     loc_12C_41A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_372:                            ; CODE XREF: COMPRESS+117j
                mov     ax, ds:word_0_48
                mov     ds:word_0_54, ax
                mov     ax, ds:word_0_4A
                mov     ds:word_0_4E, ax
                call    sub_12C_EA
                mov     ds:word_0_4C, ax
                mov     ax, ds:word_0_4C
                shl     ax, 1
                les     bx, ds:dword_0_12
                add     bx, ax
                cmp     word ptr es:[bx], 0FFFFh
                jz      loc_12C_3A9
                mov     ax, ds:word_0_4C
                shl     ax, 1
                les     bx, ds:dword_0_12
                add     bx, ax
                mov     ax, es:[bx]
                mov     ds:word_0_48, ax
                jmp     short loc_12C_41A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
                nop

loc_12C_3A9:                            ; CODE XREF: COMPRESS+84j
                mov     ax, ds:word_0_4C
                shl     ax, 1
                les     bx, ds:dword_0_12
                add     bx, ax
                mov     ax, ds:word_0_E
                mov     es:[bx], ax
                inc     ds:word_0_E
                mov     ax, ds:word_0_4C
                shl     ax, 1
                les     bx, ds:dword_0_16
                add     bx, ax
                mov     ax, ds:word_0_48
                mov     es:[bx], ax
                les     bx, ds:dword_0_1A
                add     bx, ds:word_0_4C
                mov     al, byte ptr ds:word_0_4A
                mov     es:[bx], al
                mov     dx, ds:word_0_48
                call    sub_12C_197
                mov     ax, ds:word_0_4A
                mov     ds:word_0_48, ax
                mov     ax, ds:word_0_A
                cmp     ds:word_0_E, ax
                jbe     loc_12C_3FE
                mov     dx, 102h
                call    sub_12C_197
                call    sub_12C_5A
                jmp     short loc_12C_41A
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_3FE:                            ; CODE XREF: COMPRESS+E2j
                mov     ax, ds:word_0_E
                cmp     ax, ds:word_0_10
                jbe     loc_12C_41A
                mov     dx, 101h
                call    sub_12C_197
                inc     ds:word_0_1E
                shl     ds:word_0_10, 1
                or      ds:word_0_10, 1

loc_12C_41A:                            ; CODE XREF: COMPRESS+60j COMPRESS+97j ...
                call    ds:dword_0_22
                mov     ds:word_0_4A, ax
                cmp     ax, 0FFFFh
                jz      loc_12C_429
                jmp     loc_12C_372
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_429:                            ; CODE XREF: COMPRESS+115j
                mov     ax, ds:word_0_48
                mov     dx, ax
                call    sub_12C_197
                mov     dx, 100h
                call    sub_12C_197
                mov     dx, 0
                call    sub_12C_197
                mov     ax, 1

loc_12C_440:                            ; CODE XREF: COMPRESS+15j COMPRESS+2Cj
                pop     si
                pop     di
                pop     es
                pop     ds
                popf
                mov     sp, bp
                pop     bp
                retf    4
COMPRESS        endp


; ЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫЫ

;               S u b r o u t i n e
; Attributes: bp-based frame

                public EXPAND
EXPAND          proc far

arg_0           = word ptr  6
arg_2           = word ptr  8
arg_4           = word ptr  0Ah
arg_6           = word ptr  0Ch

                push    bp
                mov     bp, sp
                sub     sp, 2
                pushf
                push    ds
                push    es
                push    di
                push    si
;DCB;                cmp     ds:WeModified, 0
;DCB;                jz      loc_12C_463
;DCB;                mov     ax, 0FFFDh
;DCB;                jmp     loc_12C_583
;DCB;; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД
;DCB;
;DCB;loc_12C_463:                            ; CODE XREF: EXPAND+10j
                mov     ds:byte_0_2C, 0
                mov     ds:byte_0_2E, 0
                cmp     ds:word_0_20, 0
                jnz     loc_12C_47A
                mov     ax, 0FFFCh
                jmp     loc_12C_583
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_47A:                            ; CODE XREF: EXPAND+27j
                mov     dx, [bp+arg_4]
                mov     ax, [bp+arg_6]
                mov     word ptr ds:dword_0_22, dx
                mov     word ptr ds:dword_0_22+2, ax
                mov     dx, [bp+arg_0]
                mov     ax, [bp+arg_2]
                mov     word ptr ds:dword_0_26, dx
                mov     word ptr ds:dword_0_26+2, ax

loc_12C_494:                            ; CODE XREF: EXPAND+135j
                call    sub_12C_5A
                call    sub_12C_157
                mov     ds:word_0_3E, ax
                cmp     ds:word_0_3E, 100h
                jnz     loc_12C_4AB
                mov     ax, 1
                jmp     loc_12C_583
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_4AB:                            ; CODE XREF: EXPAND+58j
                mov     ax, ds:word_0_3E
                mov     ds:word_0_46, ax
                push    ds:word_0_3E
                call    ds:dword_0_26

loc_12C_4B9:                            ; CODE XREF: EXPAND+132j
                call    sub_12C_157
                mov     ds:word_0_40, ax
                cmp     ds:word_0_40, 100h
                jnz     loc_12C_4CD
                mov     ax, 1
                jmp     loc_12C_583
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_4CD:                            ; CODE XREF: EXPAND+7Aj
                cmp     ds:word_0_40, 102h
                jnz     loc_12C_4D8
                jmp     loc_12C_580
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_4D8:                            ; CODE XREF: EXPAND+88j
                cmp     ds:word_0_40, 101h
                jnz     loc_12C_4E7
                inc     ds:word_0_1E
                jmp     loc_12C_57D
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_4E7:                            ; CODE XREF: EXPAND+93j
                mov     ax, ds:word_0_40
                cmp     ax, ds:word_0_E
                jb      loc_12C_512
                mov     al, byte ptr ds:word_0_46
                mov     ds:byte_0_56, al
                mov     word ptr ds:dword_0_32, offset byte_0_0+57h
                mov     word ptr ds:dword_0_32+2, ds
                mov     ax, ds:word_0_3E
                mov     ds:word_0_30, ax
                call    sub_12C_9E
                mov     word ptr ds:dword_0_42, ax
                mov     word ptr ds:dword_0_42+2, dx
                jmp     short loc_12C_52C
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_512:                            ; CODE XREF: EXPAND+A3j
                mov     word ptr ds:dword_0_32, offset byte_0_0+56h
                mov     word ptr ds:dword_0_32+2, ds
                mov     ax, ds:word_0_40
                mov     ds:word_0_30, ax
                call    sub_12C_9E
                mov     word ptr ds:dword_0_42, ax
                mov     word ptr ds:dword_0_42+2, dx

loc_12C_52C:                            ; CODE XREF: EXPAND+C5j
                les     bx, ds:dword_0_42
                mov     al, es:[bx]
                mov     ah, 0
                mov     ds:word_0_46, ax
                jmp     short loc_12C_54C
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_53A:                            ; CODE XREF: EXPAND+107j
                les     bx, ds:dword_0_42
                dec     word ptr ds:dword_0_42
                mov     al, es:[bx]
                mov     ah, 0
                push    ax
                call    ds:dword_0_26

loc_12C_54C:                            ; CODE XREF: EXPAND+EDj
                cmp     word ptr ds:dword_0_42, offset byte_0_0+56h
                jnb     loc_12C_53A
                mov     ax, ds:word_0_E
                shl     ax, 1
                les     bx, ds:dword_0_16
                add     bx, ax
                mov     ax, ds:word_0_3E
                mov     es:[bx], ax
                les     bx, ds:dword_0_1A
                add     bx, ds:word_0_E
                mov     al, byte ptr ds:word_0_46
                mov     es:[bx], al
                inc     ds:word_0_E
                mov     ax, ds:word_0_40
                mov     ds:word_0_3E, ax

loc_12C_57D:                            ; CODE XREF: EXPAND+99j
                jmp     loc_12C_4B9
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_580:                            ; CODE XREF: EXPAND+8Aj
                jmp     loc_12C_494
; ДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДДД

loc_12C_583:                            ; CODE XREF: EXPAND+15j EXPAND+2Cj ...
                pop     si
                pop     di
                pop     es
                pop     ds
                popf
                mov     sp, bp
                pop     bp
                retf    4
EXPAND          endp

CODE            ends


                end
